FROM vulhub/python:3.6

MAINTAINER neargle <nearg1e.com@gmail.com>

RUN set -ex \
    && apt-get update \
    && apt-get install --no-install-recommends -y wget  \
    && pip install -U pip \
    && pip install "flask==0.12.2" "Pillow==4.2.1" \
    && rm -rf /var/lib/apt/lists/*

RUN set -ex \
    && wget -qO- https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs921/ghostscript-9.21-linux-x86_64.tgz \
        | tar zx -C /tmp/ \
    && mkdir -p /opt/ghostscript \
    && mv /tmp/ghostscript-9.21-linux-x86_64/gs-921-linux-x86_64 /usr/local/bin/gs

COPY app.py /usr/src/

WORKDIR /usr/src/

CMD ["python", "app.py"]